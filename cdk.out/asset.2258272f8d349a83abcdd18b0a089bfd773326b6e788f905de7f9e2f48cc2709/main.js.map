{"version":3,"file":"main.js","mappings":"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","sources":["webpack://bobs-bedtime-stories/./apps/backend/api/src/environments/environment.ts","webpack://bobs-bedtime-stories/./apps/backend/api/src/handlers/books.get.ts","webpack://bobs-bedtime-stories/./apps/backend/api/src/handlers/books.post.ts","webpack://bobs-bedtime-stories/./apps/backend/api/src/handlers/stories.get.ts","webpack://bobs-bedtime-stories/./apps/backend/api/src/handlers/stories.post.ts","webpack://bobs-bedtime-stories/./apps/backend/api/src/handlers/verify.passcode.ts","webpack://bobs-bedtime-stories/./apps/backend/api/src/utils/authenticate.ts","webpack://bobs-bedtime-stories/./apps/backend/api/src/utils/wrap-api-handler.ts","webpack://bobs-bedtime-stories/./libs/backend/api/rest/src/index.ts","webpack://bobs-bedtime-stories/./libs/backend/api/rest/src/lib/errors/http-error.ts","webpack://bobs-bedtime-stories/./libs/backend/api/rest/src/lib/http-api-router.ts","webpack://bobs-bedtime-stories/./libs/backend/api/rest/src/lib/index.ts","webpack://bobs-bedtime-stories/./libs/backend/utils/src/index.ts","webpack://bobs-bedtime-stories/./libs/backend/utils/src/lib/s3.ts","webpack://bobs-bedtime-stories/./libs/backend/utils/src/lib/secrets.ts","webpack://bobs-bedtime-stories/./libs/dynamoose/src/index.ts","webpack://bobs-bedtime-stories/./libs/dynamoose/src/lib/book.model.ts","webpack://bobs-bedtime-stories/./libs/dynamoose/src/lib/story.model.ts","webpack://bobs-bedtime-stories/external commonjs \"aws-sdk\"","webpack://bobs-bedtime-stories/external commonjs \"dynamoose\"","webpack://bobs-bedtime-stories/external commonjs \"dynamoose/dist/Condition\"","webpack://bobs-bedtime-stories/external commonjs \"dynamoose/dist/Document\"","webpack://bobs-bedtime-stories/external commonjs \"nanoid\"","webpack://bobs-bedtime-stories/external commonjs \"slug\"","webpack://bobs-bedtime-stories/external commonjs \"source-map-support/register\"","webpack://bobs-bedtime-stories/external commonjs \"tslib\"","webpack://bobs-bedtime-stories/webpack/bootstrap","webpack://bobs-bedtime-stories/./apps/backend/api/src/main.ts"],"sourcesContent":["const IS_PRODUCTION = process.env.IS_PRODUCTION === 'true';\nconst IS_LOCAL = process.env.LOCAL_DEVELOPMENT_ENVIRONMENT === 'true';\n\nexport const environment = {\n  production: IS_PRODUCTION,\n  localDevelopment: IS_LOCAL,\n  passCodeSecretId: process.env.SECRET_PASS_CODE_ARN,\n  cdnBucket: process.env.S3_BUCKET_CDN,\n};\n","import {BookModel} from '@bobs-bedtime-stories/dynamoose';\nimport {wrapApiHandler} from '../utils/wrap-api-handler';\n\nexport const getBooks = wrapApiHandler(async () => {\n  console.log('get books');\n  const scanAction = BookModel.scan();\n  console.log('add \"all\" option')\n  scanAction.all();\n\n  console.log('execute');\n  const books = await scanAction.exec();\n  console.log('done', books);\n  return books;\n});\n","import {BookModel} from '@bobs-bedtime-stories/dynamoose';\nimport {wrapApiHandler} from '../utils/wrap-api-handler';\nimport {Book} from \"@bobs-bedtime-stories/shared\";\nimport * as makeSlug from 'slug';\nimport {Condition} from \"dynamoose/dist/Condition\";\n\nexport const postBook = wrapApiHandler(async (event) => {\n  const body = JSON.parse(event.body ?? '{}');\n\n  const slug = makeSlug(body.title);\n\n  return await BookModel.create({\n    title: body.title,\n    description: body.description,\n    slug,\n  } as Book, {\n    condition: new Condition().attribute('slug').not().eq(slug)\n  });\n});\n","import {StoryModel} from '@bobs-bedtime-stories/dynamoose';\nimport {wrapApiHandler} from '../utils/wrap-api-handler';\n\nexport const getStoriesOfBook = wrapApiHandler(async (event) => {\n  const bookSlug = event.pathParameters.bookSlug as string;\n\n  return await StoryModel.query()\n    .attribute('bookSlug')\n    .eq(bookSlug)\n    .all()\n    .exec();\n});\n","import {StoryModel} from '@bobs-bedtime-stories/dynamoose';\nimport {wrapApiHandler} from '../utils/wrap-api-handler';\nimport {environment} from \"../environments/environment\";\nimport {nanoid} from \"nanoid\";\nimport {BobsS3} from \"../../../../../libs/backend/utils/src/lib/s3\";\n\nexport const postANewEpisode = wrapApiHandler(async (event) => {\n  const bookSlug = event.pathParameters.bookSlug as string;\n\n  const storiesSortedByEpisode = await StoryModel.query()\n    .attribute('bookSlug').eq(bookSlug)\n    .sort('descending')\n    .limit(1)\n    .exec();\n\n  let episode = 1;\n  if (storiesSortedByEpisode.length > 0) {\n    episode = storiesSortedByEpisode[0].episode + 1;\n  }\n\n  const s3Key = `books/${bookSlug}/stories/${episode}/audio/${nanoid(5)}`;\n\n  const s3 = new BobsS3();\n  const preSignedUrlData = s3.createPreSignedPost({\n    Bucket: environment.cdnBucket,\n    Expires: 20,\n    Fields: {\n      key: s3Key,\n    },\n    Conditions: [\n      ['eq', '$Content-Type', 'audio/wav'], // content type restriction\n      ['content-length-range', 0, 100000000], // content length restrictions: 0-1MB\n      ['Cache-Control', `max-age=${365 * 24 * 60 * 60}`], // cache control\n    ],\n  });\n\n  const story = await StoryModel.create({\n    bookSlug,\n    episode,\n    date: new Date(),\n    audioS3Key: s3Key\n  });\n\n  return {\n    story,\n    audioUploadUrlData: preSignedUrlData,\n  };\n});\n","import {wrapApiHandler} from '../utils/wrap-api-handler';\n\nexport const verifyPasscode = wrapApiHandler(async (event) => {\n  return 'OK';\n});\n","import {UnauthorizedError} from \"@bobs-bedtime-stories/backend-api-rest\";\nimport {BobsSecretsManager} from \"@bobs-bedtime-stories/backend-utils\";\nimport {environment} from \"../environments/environment\";\n\nexport async function authenticate(event: any) {\n  const { 'pass-code': givenPassCode } = event.headers;\n\n  if (!givenPassCode) {\n    throw new UnauthorizedError('PassCode is missing');\n  }\n\n  const secretsManager = new BobsSecretsManager();\n  const expectedPasscode = await secretsManager.getValue(environment.passCodeSecretId);\n  if (expectedPasscode !== givenPassCode) {\n    throw new UnauthorizedError('PassCode is invalid');\n  }\n}\n","import {authenticate} from './authenticate';\nimport type {ApiHandler} from \"@bobs-bedtime-stories/backend-api-rest\";\nimport type {APIGatewayProxyEvent} from \"aws-lambda\";\n\nexport function wrapApiHandler(handler: ApiHandler<APIGatewayProxyEvent, unknown>): ApiHandler<APIGatewayProxyEvent, unknown> {\n  return async (event, context) => {\n    console.log('authenticating...');\n    await authenticate(event);\n    console.log('authenticated');\n\n    return handler(event, context);\n  };\n}\n","export * from './lib/';\n","export class HttpError extends Error {\n  public readonly httpStatusCode: number;\n\n  constructor(msg: string, httpStatusCode: number) {\n    super(msg);\n    this.httpStatusCode = httpStatusCode;\n  }\n}\n\nexport class UnauthorizedError extends HttpError {\n  constructor(reason?: string) {\n    super(reason ?? 'Unauthorized', 401);\n  }\n}\n\nexport class AccessDeniedError extends HttpError {\n  constructor(reason: string) {\n    super(`Access denied: ${reason}`, 403);\n  }\n}\n\nexport class NotFoundError extends HttpError {\n  constructor(reason: string) {\n    super(`Not found: ${reason}`, 404);\n  }\n}\n","import type { APIGatewayProxyEvent, Context } from 'aws-lambda';\nimport type { Callback } from 'aws-lambda/handler';\nimport {\n  HttpError,\n} from './errors/http-error';\n\nexport function makeObjectSerializable(obj: unknown) {\n  if (obj === null || obj === undefined || typeof obj !== 'object') {\n    return obj;\n  }\n\n  if (obj instanceof Set) {\n    return [...obj];\n  }\n\n  if (Array.isArray(obj)) {\n    return obj.map((item) => makeObjectSerializable(item));\n  }\n\n  if (obj instanceof Date) {\n    return obj;\n  }\n\n  const serializable: unknown = {};\n  Object.entries(obj).forEach(([key, val]) => {\n    serializable[key] = makeObjectSerializable(val);\n  });\n\n  return serializable;\n}\n\nexport type ApiHandler<EventType, ReturnType> = (\n  event: EventType,\n  context: Context\n) => Promise<ReturnType>;\n\nfunction makeResponse(payload: unknown, statusCode = 200) {\n  payload = makeObjectSerializable(payload);\n\n  return {\n    isBase64Encoded: false,\n    statusCode,\n    headers: { 'Content-Type': 'application/json' },\n    multiValueHeaders: {},\n    body: JSON.stringify(\n      payload ?? { status: statusCode === 200 ? 'ok' : 'error' }\n    ),\n  };\n}\n\nfunction makeErrorResponse(error: string, statusCode = 500) {\n  return makeResponse(\n    {\n      error,\n    },\n    statusCode\n  );\n}\n\nexport type ApiHttpMethod =\n  | 'GET'\n  | 'POST'\n  | 'PUT'\n  | 'DELETE'\n  | 'PATCH'\n  | 'HEAD'\n  | 'OPTIONS'\n  | 'ANY';\n\nexport interface Route<ReturnType> {\n  method: ApiHttpMethod;\n  path: string;\n  handler: ApiHandler<APIGatewayProxyEvent, ReturnType>;\n}\n\nexport function wrapHandler<EventType, ReturnType>(\n  callback: ApiHandler<EventType, ReturnType>\n) {\n  return async (\n    event: EventType,\n    context: Context,\n    lambdaCallback: Callback\n  ) => {\n    let response: unknown;\n    try {\n      response = await callback(event, context);\n      const transformedResponse = makeResponse(response);\n      if (lambdaCallback) {\n        lambdaCallback(null, transformedResponse);\n        return;\n      }\n      return transformedResponse;\n    } catch (e) {\n      let message = e as string;\n      let httpStatusCode = 500;\n\n      if (e instanceof Error) {\n        message = e.message;\n      }\n\n      if (e instanceof HttpError) {\n        httpStatusCode = e.httpStatusCode;\n      }\n\n      const errorResponse = makeErrorResponse(message, httpStatusCode);\n\n      console.error({\n        errorResponse,\n        originalResponse: response,\n        originalError: {\n          ...e,\n          name: e.name,\n          message: e.message,\n          stack: e.stack,\n          httpStatusCode: e.httpStatusCode ?? 'not-given',\n        },\n      });\n      if (lambdaCallback) {\n        lambdaCallback(null, errorResponse);\n        return;\n      }\n\n      return errorResponse;\n    }\n  };\n}\n\nexport class HttpApiRouter {\n  public routes: Route<unknown>[] = [];\n  private readonly sessionTokenArn?: string;\n\n  public constructor(sessionTokenArn?: string) {\n    this.sessionTokenArn = sessionTokenArn;\n  }\n\n  private addRoute<ReturnType>(\n    method: ApiHttpMethod,\n    path: string,\n    handler: ApiHandler<APIGatewayProxyEvent, ReturnType>,\n  ) {\n    this.routes.push({\n      method,\n      path,\n      handler,\n    });\n  }\n\n  public addRoutes() {\n    const makeAddRouteFunction =\n      <ReturnType>(method: ApiHttpMethod) =>\n      (\n        path: string,\n        handler: ApiHandler<APIGatewayProxyEvent, ReturnType>,\n      ) => {\n        this.addRoute(method, path, handler);\n        return this.addRoutes();\n      };\n\n    return {\n      get: makeAddRouteFunction('GET'),\n      post: makeAddRouteFunction('POST'),\n      put: makeAddRouteFunction('PUT'),\n      delete: makeAddRouteFunction('DELETE'),\n      any: makeAddRouteFunction('ANY'),\n      options: makeAddRouteFunction('OPTIONS'),\n      patch: makeAddRouteFunction('PATCH'),\n      head: makeAddRouteFunction('HEAD'),\n    };\n  }\n\n  public async handler(\n    event: APIGatewayProxyEvent,\n    context: Context,\n    callback: (error: unknown, result: unknown) => unknown\n  ) {\n    console.log('Router', 'request', 'info', {\n      httpMethod: event.httpMethod,\n      resource: event.resource,\n      path: event.path,\n    });\n\n    context.callbackWaitsForEmptyEventLoop = false;\n\n    const route = this.routes.find(\n      (r) => r.path === event.resource && r.method === event.httpMethod\n    );\n\n    if (!route) {\n      console.log('Router', 'route-not-found', 'error', {\n        event,\n        routes: this.routes,\n      });\n      return callback(null, makeErrorResponse('404 Route not found', 404));\n    }\n\n    const wrappedHandler = wrapHandler(route.handler.bind(this));\n\n    try {\n      let isCalled = false;\n      const responsePromise = wrappedHandler(event, context, (error, result) => {\n        console.log('Router', 'request', error ? 'error' : 'success', {\n          httpMethod: event.httpMethod,\n          resource: event.resource,\n          path: event.path,\n          error,\n          result,\n        });\n\n        // eslint-disable-next-line no-console\n        console.log('now calling callback');\n\n        !isCalled && callback(error, result);\n        isCalled = true;\n      }) as Promise<unknown> | unknown;\n\n      if (typeof (responsePromise as Promise<unknown>).then === 'function') {\n        // eslint-disable-next-line no-console\n        console.log('handler is promise, awaiting response');\n        const response = await responsePromise;\n\n        console.log('Router', 'request', 'success', {\n          httpMethod: event.httpMethod,\n          resource: event.resource,\n          path: event.path,\n          response,\n        });\n\n        // eslint-disable-next-line no-console\n        console.log('promise done, calling callback');\n        !isCalled && callback(null, response);\n        isCalled = true;\n      }\n    } catch (e) {\n      console.log('Router', 'request', 'error', {\n        httpMethod: event.httpMethod,\n        resource: event.resource,\n        path: event.path,\n        error: {\n          name: e.name,\n          message: e.message,\n          stack: e.stack,\n        },\n      });\n\n      if (e instanceof HttpError) {\n        callback(null, makeErrorResponse(e.message, e.httpStatusCode));\n      } else {\n        callback(null, makeErrorResponse('Server Error', 500));\n      }\n    }\n  }\n}\n","export * from './errors/http-error';\nexport * from './http-api-router';\n","export * from './lib/secrets';\n","import { S3 } from 'aws-sdk';\n\nexport class BobsS3 {\n  private readonly s3: S3;\n\n  constructor(params?: S3.ClientConfiguration) {\n    const isLocal = process.env.LOCAL_DEVELOPMENT_ENVIRONMENT === 'true';\n\n    this.s3 = new S3({\n      endpoint: isLocal ? 'http://localhost:9000' : undefined,\n      ...(params ?? {}),\n      region: isLocal ? 'us-east-1' : params?.region,\n      s3ForcePathStyle: isLocal ? true : params?.s3ForcePathStyle,\n      signatureVersion: isLocal ? 'v4' : params?.signatureVersion,\n      maxRetries: 30,\n    });\n  }\n\n  public async upload(\n    params: S3.PutObjectRequest\n  ): Promise<S3.ManagedUpload.SendData> {\n    return this.s3.upload(params).promise();\n  }\n\n  public async getObject(\n    params: S3.GetObjectRequest\n  ): Promise<S3.GetObjectOutput> {\n    return this.s3.getObject(params).promise();\n  }\n\n  public createPreSignedPost(\n    params: S3.PresignedPost.Params\n  ): S3.PresignedPost {\n    return this.s3.createPresignedPost(params);\n  }\n}\n","import { SecretsManager } from 'aws-sdk';\n\nexport class BobsSecretsManager {\n  private secretsManager: SecretsManager;\n\n  constructor() {\n    const isLocal = process.env.LOCAL_DEVELOPMENT_ENVIRONMENT === 'true';\n\n    this.secretsManager = new SecretsManager({\n      endpoint: isLocal ? 'http://localhost:3000' : undefined,\n      maxRetries: 30,\n    });\n  }\n\n  public async getValue(secretId: string) {\n    const response = await this.secretsManager\n      .getSecretValue({\n        SecretId: secretId,\n      })\n      .promise();\n\n    let secret: string;\n    if ('SecretString' in response) {\n      secret = response.SecretString as string;\n    } else {\n      const buff = new Buffer(response.SecretBinary as string, 'base64');\n      secret = buff.toString('ascii');\n    }\n\n    return secret;\n  }\n}\n","export * from './lib/story.model';\nexport * from './lib/book.model';\n\nimport { aws } from 'dynamoose';\n\nif (process.env.LOCAL_DEVELOPMENT_ENVIRONMENT === 'true') {\n  aws.ddb.local();\n}\n","import {Book} from \"@bobs-bedtime-stories/shared\";\nimport {model, Schema} from \"dynamoose\";\nimport {Document} from \"dynamoose/dist/Document\";\n\nexport class BookDocument extends Document implements Book {\n  title!: string;\n  slug!: string;\n  description!: string;\n  coverImageUrl!: string;\n}\n\nexport const BookTableName = process.env.DYNAMO_TABLE_BOOKS;\n\nexport const BookSchema = new Schema({\n  title: {\n    type: String,\n    required: true,\n  },\n  slug: {\n    type: String,\n    required: true,\n    hashKey: true,\n  },\n  description: {\n    type: String,\n    required: true,\n  },\n  coverImageUrl: {\n    type: String,\n    required: false,\n  },\n});\n\nexport const BookModel = model<BookDocument>(BookTableName, BookSchema, {\n  create: false,\n  update: false,\n});\n","import {Story} from \"@bobs-bedtime-stories/shared\";\nimport {model, Schema} from \"dynamoose\";\nimport {Document} from \"dynamoose/dist/Document\";\n\nexport class StoryDocument extends Document implements Story {\n  bookSlug!: string;\n  audioS3Key!: string;\n  date!: Date;\n  description?: string;\n  episode!: number;\n  externalLinks?: string[];\n  imageUrls?: string[];\n  videoUrls?: string[];\n}\n\nexport const StoryTableName = process.env.DYNAMO_TABLE_STORIES;\n\nexport const StorySchema = new Schema({\n  bookSlug: {\n    type: String,\n    required: true,\n    hashKey: true,\n  },\n  episode: {\n    type: Number,\n    required: true,\n    rangeKey: true,\n  },\n  audioS3Key: {\n    type: String,\n    required: true,\n  },\n  date: {\n    type: Date,\n    required: true,\n  },\n  description: {\n    type: String,\n    required: false,\n  },\n  externalLinks: {\n    type: [String],\n    required: false,\n  },\n  imageUrls: {\n    type: [String],\n    required: false,\n  },\n  videoUrls: {\n    type: [String],\n    required: false,\n  },\n});\n\nexport const StoryModel = model<StoryDocument>(StoryTableName, StorySchema, {\n  create: false,\n  update: false,\n});\n","module.exports = require(\"aws-sdk\");","module.exports = require(\"dynamoose\");","module.exports = require(\"dynamoose/dist/Condition\");","module.exports = require(\"dynamoose/dist/Document\");","module.exports = require(\"nanoid\");","module.exports = require(\"slug\");","module.exports = require(\"source-map-support/register\");","module.exports = require(\"tslib\");","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","import 'source-map-support/register';\nimport {HttpApiRouter} from \"@bobs-bedtime-stories/backend-api-rest\";\nimport {getBooks} from \"./handlers/books.get\";\nimport {getStoriesOfBook} from \"./handlers/stories.get\";\nimport {verifyPasscode} from \"./handlers/verify.passcode\";\nimport {postBook} from \"./handlers/books.post\";\nimport {postANewEpisode} from \"./handlers/stories.post\";\n\nconst router = new HttpApiRouter();\n\nrouter.addRoutes()\n  .get('/books', getBooks)\n  .post('/books', postBook)\n  .get('/books/{bookSlug}/stories', getStoriesOfBook)\n  .post('/books/{bookSlug}/stories', postANewEpisode)\n  .post('/auth/verify-passcode', verifyPasscode);\n\nexport const handler = router.handler.bind(router);\nexport const routes = router.routes;\n"],"names":[],"sourceRoot":""}